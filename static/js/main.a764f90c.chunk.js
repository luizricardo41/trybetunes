(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{24:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(25),r=n.n(i),s=(n(32),n(2)),o=n(3),l=n(5),u=n(4),b=n(10),j=n(6),d=n(0),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)(d.Fragment,{children:" Carregando..."})}}]),n}(a.Component),m=n(18),O="user",f=function(e){return localStorage.setItem(O,JSON.stringify(e))},p=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},v=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(O));null===t&&(t={}),p(t)(e)}))},x=(n(34),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={verifyName:!1,userInfo:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){return e.setState({verifyName:!0,userInfo:t})}))}},{key:"render",value:function(){var e=this.state,t=e.verifyName,n=e.userInfo;return Object(d.jsxs)("header",{className:"header-app",children:[Object(d.jsxs)("div",{className:"header-logo-user",children:[Object(d.jsxs)("div",{className:"name-app-header",children:[Object(d.jsx)("h1",{children:"TryBE"}),Object(d.jsx)("h1",{children:"Tunes"})]}),Object(d.jsx)("div",{children:Object(d.jsxs)("h4",{children:["Usu\xe1rio:",t?" ".concat(n.name):Object(d.jsx)(h,{})]})})]}),Object(d.jsx)("div",{className:"div-navigator",children:Object(d.jsxs)("nav",{className:"nav",children:[Object(d.jsx)(b.b,{to:"/search","data-testid":"link-to-search",children:"Pequisa"}),Object(d.jsx)(b.b,{to:"/favorites","data-testid":"link-to-favorites",children:"M\xfasicas Favoritas"}),Object(d.jsx)(b.b,{to:"/profile","data-testid":"link-to-profile",children:"Perfil"})]})})]})}}]),n}(c.a.Component)),g=n(23),N=n(27),k="favorite_songs";JSON.parse(localStorage.getItem(k))||localStorage.setItem(k,JSON.stringify([]));var y=function(){return JSON.parse(localStorage.getItem(k))},S=function(e){return localStorage.setItem(k,JSON.stringify(e))},C=function(e){return function(t){setTimeout((function(){t(e)}),500)}},E=function(){return new Promise((function(e){var t=y();C(t)(e)}))},I=function(e){return new Promise((function(t){if(e){var n=y();S([].concat(Object(N.a)(n),[e]))}C("OK")(t)}))},F=function(e){return new Promise((function(t){var n=y();S(n.filter((function(t){return t.trackId!==e.trackId}))),C("OK")(t)}))},w=(n(43),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleChange=function(t){var n=t.target,a=e.props,c=a.collection,i=a.favorites,r=n.id,s=n.checked,o="";o=c.album?c.album.find((function(e){return e.trackId===Number(r)})):c.musicsFavorites.find((function(e){return e.trackId===Number(r)})),s&&r?I(o):F(o),i()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.trackId,n=e.previewUrl,a=e.collection,c=this.handleChange;return Object(d.jsxs)("div",{className:"music-preview",children:[Object(d.jsx)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:Object(d.jsx)("track",{kind:"captions"})}),Object(d.jsxs)("label",{htmlFor:t,children:[a.musicsFavorites.some((function(e){return e.trackId===t}))?Object(d.jsx)("h2",{className:"heart-checked",children:Object(d.jsx)(g.a,{})}):Object(d.jsx)("h2",{className:"heart-no-checked",children:Object(d.jsx)(g.a,{})}),Object(d.jsx)("input",{className:"check-favorite",name:"favorite",type:"checkbox","data-testid":"checkbox-music-".concat(t),onChange:c,id:t,checked:a.musicsFavorites.some((function(e){return e.trackId===t}))})]})]})}}]),n}(a.Component)),P=n(15),U=n.n(P),B=n(17),A=function(){var e=Object(B.a)(U.a.mark((function e(t){var n,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=(n(45),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).recoveryFavorites=function(){E().then((function(t){return e.setState({musicsFavorites:t})}))},e.pageAlbum=function(){var t=e.state.album;return Object(d.jsxs)("div",{"data-testid":"page-album",className:"artist-album",children:[Object(d.jsxs)("span",{"data-testid":"artist-name",children:["Artista/Banda:"," ",t[0].artistName]})," ",Object(d.jsx)("br",{}),Object(d.jsxs)("span",{"data-testid":"album-name",children:["Collection Name"," ",t[0].collectionCensoredName]})]})},e.state={album:[],musicsFavorites:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params;A(t.id).then((function(t){return e.setState({album:t})}))}},{key:"render",value:function(){var e=this.state,t=e.album,n=e.musicsFavorites,a=this.recoveryFavorites,c=this.pageAlbum,i=t.filter((function(e){return void 0!==e.trackName}));return Object(d.jsxs)("div",{children:[Object(d.jsx)(x,{}),0===t.length?Object(d.jsx)(h,{}):c(),Object(d.jsx)("div",{className:"container-track",children:i.map((function(e){var c=e.trackName,i=e.trackId,r=e.previewUrl;return Object(d.jsxs)("div",{className:"track",children:[Object(d.jsx)("p",{children:c}),Object(d.jsx)(w,{trackId:i,previewUrl:r,collection:{album:t,musicsFavorites:n},favorites:a})]},c)}))})]})}}]),n}(a.Component)),J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).recoveryFavoriteSongs=function(){E().then((function(t){return e.setState({musicsFavorites:t})}))},e.state={musicsFavorites:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.recoveryFavoriteSongs()}},{key:"render",value:function(){var e=this.state.musicsFavorites,t=this.recoveryFavoriteSongs;return Object(d.jsxs)("div",{children:[Object(d.jsx)(x,{}),Object(d.jsx)("div",{"data-testid":"page-favorites",className:"container-track",children:0!==e.length?e.map((function(n){var a=n.artistName,c=n.trackId,i=n.collectionName,r=n.trackName,s=n.previewUrl;return Object(d.jsxs)("div",{className:"track",children:[Object(d.jsx)("p",{children:"".concat(r," - ").concat(a)}),Object(d.jsx)("p",{children:i}),Object(d.jsx)(w,{trackId:c,previewUrl:s,collection:{musicsFavorites:e},favorites:t})]},c)})):Object(d.jsx)("h3",{children:"Nenhuma m\xfasica adicionada por aqui..."})})]})}}]),n}(a.Component),L=n(13),M=n(12),T=(n(46),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={buttonEnable:!0,nameUser:"",logado:!1},e.handleChange=e.handleChange.bind(Object(M.a)(e)),e.enableButton=e.enableButton.bind(Object(M.a)(e)),e.infoUser=e.infoUser.bind(Object(M.a)(e)),e}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(L.a)({},n,a)),this.enableButton(a)}},{key:"enableButton",value:function(e){e.length>=3?this.setState({buttonEnable:!1}):this.setState({buttonEnable:!0})}},{key:"infoUser",value:function(){var e=this,t=this.state.nameUser;this.setState({saveName:!1},(function(){var n;(n={name:t},new Promise((function(e){f(Object(m.a)(Object(m.a)({},{name:"",email:"",image:"",description:""}),n)),p("OK")(e)}))).then((function(){return e.setState({logado:!0,saveName:!0})}))}))}},{key:"render",value:function(){var e=this.state,t=e.buttonEnable,n=e.logado,a=e.saveName,c=this.handleChange,i=this.infoUser;return n?Object(d.jsx)(j.a,{to:"./search"}):!1===a?Object(d.jsx)(h,{}):Object(d.jsx)("div",{className:"total-login",children:Object(d.jsxs)("div",{"data-testid":"page-login",className:"login",children:[Object(d.jsxs)("div",{className:"name-app",children:[Object(d.jsx)("h1",{className:"trybe",children:"TryBE"}),Object(d.jsx)("h1",{className:"tunes",children:"Tunes"})]}),Object(d.jsx)("label",{htmlFor:"nameUser",children:Object(d.jsx)("input",{type:"text",name:"nameUser",placeholder:"Nome","data-testid":"login-name-input",onChange:c})}),Object(d.jsx)("button",{className:"btn-login",type:"submit","data-testid":"login-submit-button",disabled:t,onClick:function(){return i()},children:"Entrar"})]})})}}]),n}(a.Component)),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{"data-testid":"page-not-found",children:"Page NotFound"})}}]),n}(a.Component),q=(n(24),n.p+"static/media/sem-foto.cfea8412.png"),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).goProfileEdit=function(){e.setState({perfilEdit:!0})},e.state={name:"",email:"",image:"",description:"",perfilEdit:!1},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){return e.setState({name:t.name,email:t.email,image:t.image,description:t.description})}))}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.image,c=e.description,i=e.perfilEdit,r=this.goProfileEdit;return i?Object(d.jsx)(j.a,{to:"profile/edit"}):Object(d.jsxs)("div",{children:[Object(d.jsx)(x,{}),Object(d.jsxs)("div",{"data-testid":"page-profile",className:"page-profile",children:[Object(d.jsx)("div",{className:"image",children:Object(d.jsx)("img",{src:""===a?q:a,alt:"foto de perfil"})}),Object(d.jsxs)("div",{className:"box-perfil",children:[Object(d.jsxs)("div",{className:"info-profile",children:[Object(d.jsxs)("span",{children:["Name:"," ",t]}),Object(d.jsxs)("span",{children:["Email:"," ",n]}),Object(d.jsxs)("span",{children:["Description:"," ",c]})]}),Object(d.jsx)("div",{className:"btn-container",children:Object(d.jsx)("button",{type:"button",className:"btn-perfil-edit",onClick:function(){return r()},children:"Editar Perfil"})})]})]})]})}}]),n}(a.Component),_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(L.a)({},a,c)),e.enableButton(a,c)},e.enableButton=function(t,n){"name"===t&&n.length>=3?e.setState({buttonEnable:!1}):"name"===t&&e.setState({buttonEnable:!0})},e.saveProfile=function(){var t,n=e.state,a=n.name,c=n.email,i=n.image,r=n.description;e.setState({perfilEdit:!1}),t={name:a,email:c,image:i,description:r},new Promise((function(e){f(Object(m.a)({},t)),p("OK")(e)}))},e.state={name:"",email:"",image:"",description:"",perfilEdit:!0,buttonEnable:!0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){return e.setState({name:t.name,email:t.email,image:t.image,description:t.description})}))}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.image,a=e.perfilEdit,c=e.buttonEnable,i=e.email,r=e.description,s=this.saveProfile,o=this.handleChange;return a?Object(d.jsxs)("div",{children:[Object(d.jsx)(x,{}),Object(d.jsxs)("div",{"data-testid":"page-profile",className:"page-profile",children:[Object(d.jsx)("div",{className:"image",children:Object(d.jsx)("img",{src:""===n||n.indexOf(" ")>=0?q:n,alt:"foto de perfil"})}),Object(d.jsxs)("div",{className:"box-perfil",children:[Object(d.jsxs)("div",{className:"info-profile",children:[Object(d.jsx)("p",{children:"Image:"})," ",Object(d.jsx)("input",{type:"text",name:"image",onChange:o}),Object(d.jsx)("p",{children:"Name:"}),Object(d.jsx)("input",{type:"text",name:"name",placeholder:t,onChange:o}),Object(d.jsx)("p",{children:"Email:"}),Object(d.jsx)("input",{type:"text",name:"email",placeholder:i,onChange:o}),Object(d.jsx)("p",{children:"Description:"}),Object(d.jsx)("textarea",{type:"text",name:"description",placeholder:r,onChange:o})]}),Object(d.jsx)("div",{className:"btn-container",children:Object(d.jsx)("button",{type:"button",className:"btn-perfil-edit",onClick:function(){return s()},disabled:c,children:"Salvar Perfil"})})]})]})]}):Object(d.jsx)(j.a,{to:"/profile"})}}]),n}(a.Component),z=function(){var e=Object(B.a)(U.a.mark((function e(t){var n,a,c,i,r,s;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:return i=e.sent,r=i.results,s=r.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=(n(47),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).getAlbums=function(){var t=e.state.name,n=t;e.setState({saveName:t,name:"",hideLabel:!0,sectionSearch:"section-enable"},(function(){return z(n).then((function(t){return e.setState({albums:t,hideLabel:!1,msgEnable:"msg-search"})}))})),e.enableButton("")},e.messageFoundAlbum=function(){var t=e.state.saveName;return Object(d.jsx)("span",{children:Object(d.jsxs)("h3",{children:["Resultado de \xe1lbuns de:"," ",t]})})},e.state={name:"",buttonEnable:!0,albums:[],hideLabel:!1,sectionSearch:"section-disable",msgEnable:"",saveName:"artista"},e.handleChange=e.handleChange.bind(Object(M.a)(e)),e.enableButton=e.enableButton.bind(Object(M.a)(e)),e.returnLabel=e.returnLabel.bind(Object(M.a)(e)),e}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(L.a)({},n,a)),this.enableButton(a)}},{key:"returnLabel",value:function(){var e=this.state,t=e.buttonEnable,n=e.name,a=this.getAlbums,c=this.handleChange;return Object(d.jsxs)("div",{className:"input-search",children:[Object(d.jsx)("label",{htmlFor:"name",children:Object(d.jsx)("input",{type:"text",name:"name",onChange:c,"data-testid":"search-artist-input",value:n})}),Object(d.jsx)("button",{type:"submit","data-testid":"search-artist-button",disabled:t,onClick:a,children:"Pesquisar"})]})}},{key:"enableButton",value:function(e){e.length>=2?this.setState({buttonEnable:!1}):this.setState({buttonEnable:!0})}},{key:"render",value:function(){var e=this.state,t=e.albums,n=e.hideLabel,a=e.saveName,c=e.sectionSearch,i=e.msgEnable,r=this.messageFoundAlbum,s=this.returnLabel;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x,{}),Object(d.jsxs)("div",{"data-testid":"page-search",children:[n?Object(d.jsx)(h,{}):s(),Object(d.jsxs)("div",{className:i,children:[0!==t.length&&r(),0===t.length&&!a&&Object(d.jsx)("div",{children:Object(d.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"})})]}),Object(d.jsx)("section",{className:c,children:t.map((function(e){return Object(d.jsx)("div",{className:"albuns",children:Object(d.jsxs)(b.b,{"data-testid":"link-to-album-".concat(e.collectionId),to:"/album/".concat(e.collectionId),children:[Object(d.jsx)("img",{src:e.artworkUrl100,alt:e.collectionName}),Object(d.jsxs)("div",{className:"text-album",children:["Banda/Artista:"," ".concat(e.artistName)]}),Object(d.jsxs)("div",{className:"text-album",children:["Album:"," ".concat(e.collectionName)]})]})},e.collectionId)}))})]})]})}}]),n}(a.Component)),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("main",{children:Object(d.jsxs)(j.d,{children:[Object(d.jsx)(j.b,{exact:!0,path:"/",component:T}),Object(d.jsx)(j.b,{exact:!0,path:"/search",component:G}),Object(d.jsx)(j.b,{exact:!0,path:"/album/:id",component:D}),Object(d.jsx)(j.b,{exact:!0,path:"/favorites",component:J}),Object(d.jsx)(j.b,{exact:!0,path:"/profile",component:R}),Object(d.jsx)(j.b,{exact:!0,path:"/profile/edit",component:_}),Object(d.jsx)(j.b,{exact:!0,path:"*",component:K})]})})}}]),n}(a.Component),Q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)(b.a,{basename:"/trybetunes",children:Object(d.jsx)(H,{})})}}]),n}(c.a.Component);r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(Q,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.a764f90c.chunk.js.map